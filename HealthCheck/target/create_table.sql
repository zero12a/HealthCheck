create sequence SEQ_HC_DOMIAN increment by 1 start with 1 nomaxvalue nocycle nocache;
create sequence SEQ_HC_URL increment by 1 start with 1 nomaxvalue nocycle nocache;
create sequence SEQ_HC_RESULT increment by 1 start with 1 nomaxvalue nocycle nocache;
create sequence SEQ_HC_RESULTD increment by 1 start with 1 nomaxvalue nocycle nocache;
create sequence SEQ_HC_SCAN increment by 1 start with 1 nomaxvalue nocycle nocache;

--drop table HC_SCAN
create table HC_SCAN (
	SCAN_SEQ INT NOT NULL,
	SCAN_DOMAIN_CNT INT DEFAULT 0 NOT NULL,
	SCAN_URL_CNT INT DEFAULT 0 NOT NULL,
	TOT_RES_TIME INT DEFAULT 0 NOT NULL,
	AVG_RES_TIME INT DEFAULT 0 NOT NULL,
	FAIL_CNT INT DEFAULT 0 NOT NULL,
	SUCCESS_CNT INT DEFAULT 0 NOT NULL,
	FULL_SCAN_TIME INT DEFAULT 0 NOT NULL,
	ADD_DT VARCHAR2(14) NOT NULL,
	MOD_DT VARCHAR2(14) NULL,
	PRIMARY KEY (SCAN_SEQ)
);


create table HC_DOMAIN (
	DOMAIN_SEQ INT NOT NULL,
	SYSTEM_NM VARCHAR2(100),
	DOMAIN VARCHAR2(200) NOT NULL,
	USE_YN VARCHAR2(1) DEFAULT 'Y' NOT NULL,
	SCAN_ORD INT DEFAULT 0 NOT NULL,
	CHARSET VARCHAR2(20) DEFAULT 'UTF-8' NOT NULL,
	EMPNO VARCHAR2(100) NOT NULL,
	TIMEOUT INT DEFAULT 10000 NOT NULL,
	CHK_S_TM VARCHAR2(4),
	CHK_E_TM VARCHAR2(4),
	SSL_PORT NUMBER NULL,
	SSL_EXPIRE_DT VARCHAR2(8) NULL,
	SSL_LAST_UPD_DT VARCHAR2(14) NULL,
	SSL_ALM_PERIOD NUMBER NULL,
	ADD_DT VARCHAR2(14) NOT NULL,
	MOD_DT VARCHAR2(14),
	PRIMARY KEY (DOMAIN_SEQ)
);
alter table HC_DOMAIN add ( CHK_S_TM VARCHAR2(4) DEFAULT '0900' NOT NULL);
alter table HC_DOMAIN add ( CHK_E_TM VARCHAR2(4) DEFAULT '2000' NOT NULL);
alter table HC_DOMAIN add ( SSL_ALM_PERIOD NUMBER NULL);
alter table HC_DOMAIN modify ( EMPNO VARCHAR2(100) );
alter table HC_DOMAIN add ( SCAN_ORD NUMBER DEFAULT 100 NOT NULL );


alter table HC_DOMAIN add ( 
	SSL_PORT NUMBER NULL,
	SSL_EXPIRE_DT VARCHAR2(8) NULL,
	SSL_LAST_UPD_DT VARCHAR2(14) NULL
);


create table HC_URL (
	URL_SEQ INT NOT NULL,
	DOMAIN_SEQ INT NOT NULL,
	HOST VARCHAR2(100),
	URL_NM VARCHAR2(100),
	FULL_URL VARCHAR2(500) NOT NULL,
	METHOD VARCHAR2(4) DEFAULT 'GET' NOT NULL,
	RES_CONTENT_TYPE VARCHAR2(200) DEFAULT '*/*' NOT NULL
	REQ_CONTENT_TYPE VARCHAR2(200) NULL
	QUERY_STRING VARCHAR2(1000),
	EXPECT_RES_CD VARCHAR2(3) DEFAULT '200' NOT NULL,
	BYTE_MIN INT,
	BYTE_MAX INT,
	RES_TIME_MAX INT DEFAULT 3000 NOT NULL,
	CONTENT_IN_STR VARCHAR2(1000),
	CONTENT_HASH VARCHAR2(1000),
	DEBUG_YN VARCHAR2(1) DEFAULT 'Y' NOT NULL,
	USE_YN VARCHAR2(1) DEFAULT 'Y' NOT NULL,
	SCAN_ORD INT DEFAULT 0 NOT NULL,
	FORCE_QS_ENC_YN VARCHAR2(1) DEFAULT 'Y' NOT NULL,
	ADD_DT VARCHAR2(14) NOT NULL,
	MOD_DT VARCHAR2(14),
	PRIMARY KEY (URL_SEQ)
)





--drop table HC_RESULT;
create table HC_RESULT (
	RESULT_SEQ INT NOT NULL,
	SCAN_SEQ INT NOT NULL,
	DOMAIN_SEQ INT NOT NULL,
	SCAN_DT VARCHAR2(8) NOT NULL,
	SCAN_TM VARCHAR2(6) NOT NULL,
	SUCCESS_YN VARCHAR2(1) DEFAULT 'N' NOT NULL,
	SCAN_CNT INT NOT NULL,
	SUCCESS_CNT INT,
	FAIL_CNT INT,
	SSL_EXPIRE_DT VARCHAR2(8) NULL,
	SSL_DUE_DAY NUMBER NULL,
	SSL_ERR_CD VARCHAR2(100) NULL,
	SSL_ERR_MSG VARCHAR2(1000) NULL,
	ADD_DT VARCHAR2(14) NOT NULL,
	MOD_DT VARCHAR2(14),
	PRIMARY KEY ( RESULT_SEQ )
);

create index IDX_HC_RESULT_DSEQ_N_SCAN_DT ON HC_RESULT(DOMAIN_SEQ,SCAN_DT);

alter table HC_RESULT add ( 
	SSL_EXPIRE_DT VARCHAR2(8) NULL,
	SSL_DUE_DAY NUMBER NULL,
	SSL_ERR_CD VARCHAR2(100) NULL,
	SSL_ERR_MSG VARCHAR2(1000) NULL
);

--drop table HC_RESULTD;
create table HC_RESULTD (
	RESULTD_SEQ INT NOT NULL,
	RESULT_SEQ INT NOT NULL,
	URL_SEQ INT NOT NULL,
	SUCCESS_YN VARCHAR2(1) DEFAULT 'N' NOT NULL,
	RES_CD VARCHAR2(3),
	RES_TIME INT,
	RES_SIZE INT,
	RES_BODY CLOB,
	RES_HASH VARCHAR2(2000),
	INVALID_CD VARCHAR2(14),
	ERROR_CD VARCHAR2(1000),
	ERROR_MSG CLOB,
	ERROR_TRACE CLOB,
	PUSH_SUCCESS_YN VARCHAR2(1) DEFAULT 'N' NOT NULL,
	PUSH_RECEIVER_ID VARCHAR2(4000) NULL,
	PUSH_HEADER VARCHAR2(500) NULL,
	PUSH_MESSAGE VARCHAR2(500) NULL,
	PUSH_MESSAGE_BODY VARCHAR2(1000) NULL,
	PUSH_ERROR_CD VARCHAR2(100) NULL,
	PUSH_ERROR_MSG CLOB NULL,
	PUSH_ERROR_TRACE CLOB NULL,
	ADD_DT VARCHAR2(14) NOT NULL,
	MOD_DT VARCHAR2(14) NULL,
	PRIMARY KEY ( RESULTD_SEQ )
);

